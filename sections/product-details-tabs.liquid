{%- style -%}
  .product-tabs {
    margin-top: 3rem;
    border-top: 1px solid var(--color-border);
  }

  .product-tabs__header {
    display: flex;
    gap: 2rem;
    margin-bottom: 2rem;
    border-bottom: 1px solid var(--color-border);
  }

  .product-tabs__tab {
    padding: 1rem 0;
    color: var(--color-muted-foreground);
    text-decoration: none;
    font-weight: 500;
    position: relative;
    transition: color 0.2s ease;
  }

  .product-tabs__tab:hover {
    color: var(--color-foreground);
  }

  .product-tabs__tab.active {
    color: var(--color-primary);
  }

  .product-tabs__tab.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--color-primary);
  }

  .product-tabs__content {
    display: none;
  }

  .product-tabs__content.active {
    display: block;
  }

  .product-tabs__description {
    line-height: var(--line-height-relaxed);
  }

  .product-tabs__specs {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
  }

  .product-tabs__spec-item {
    padding: 1rem;
    background: var(--color-muted);
    border-radius: 0.375rem;
  }

  .product-tabs__spec-label {
    font-size: var(--font-size-sm);
    color: var(--color-muted-foreground);
    margin-bottom: 0.25rem;
  }

  .product-tabs__spec-value {
    font-weight: 500;
  }

  .product-tabs__reviews {
    max-width: 800px;
  }

  .product-tabs__review {
    padding: 1.5rem 0;
    border-bottom: 1px solid var(--color-border);
  }

  .product-tabs__review:last-child {
    border-bottom: none;
  }

  .product-tabs__review-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .product-tabs__review-author {
    font-weight: 500;
  }

  .product-tabs__review-date {
    color: var(--color-muted-foreground);
    font-size: var(--font-size-sm);
  }

  .product-tabs__review-rating {
    display: flex;
    gap: 0.25rem;
    margin-bottom: 0.5rem;
  }

  .product-tabs__review-content {
    line-height: var(--line-height-relaxed);
  }

  @media screen and (max-width: 768px) {
    .product-tabs__header {
      flex-direction: column;
      gap: 1rem;
    }

    .product-tabs__specs {
      grid-template-columns: 1fr;
    }
  }
{%- endstyle -%}

<div class="product-tabs">
  <div class="product-tabs__header">
    <button class="product-tabs__tab active" data-tab="description">Description</button>
    <button class="product-tabs__tab" data-tab="specifications">Specifications</button>
    <button class="product-tabs__tab" data-tab="reviews">Reviews</button>
  </div>

  <div class="product-tabs__content active" id="description">
    <div class="product-tabs__description">
      {{ product.description }}
    </div>
  </div>

  <div class="product-tabs__content" id="specifications">
    <div class="product-tabs__specs">
      {%- for option in product.options_with_values -%}
        <div class="product-tabs__spec-item">
          <div class="product-tabs__spec-label">{{ option.name }}</div>
          <div class="product-tabs__spec-value">{{ option.values | join: ', ' }}</div>
        </div>
      {%- endfor -%}

      {%- for metafield in product.metafields.specifications -%}
        <div class="product-tabs__spec-item">
          <div class="product-tabs__spec-label">{{ metafield[0] | replace: '_', ' ' | capitalize }}</div>
          <div class="product-tabs__spec-value">{{ metafield[1] }}</div>
        </div>
      {%- endfor -%}
    </div>
  </div>

  <div class="product-tabs__content" id="reviews">
    <div class="product-tabs__reviews">
      {%- for review in product.metafields.reviews -%}
        <div class="product-tabs__review">
          <div class="product-tabs__review-header">
            <div class="product-tabs__review-author">{{ review[1].author }}</div>
            <div class="product-tabs__review-date">{{ review[1].date }}</div>
          </div>
          <div class="product-tabs__review-rating">
            {%- for i in (1..5) -%}
              {%- if i <= review[1].rating -%}
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                </svg>
              {%- else -%}
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" opacity="0.2">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                </svg>
              {%- endif -%}
            {%- endfor -%}
          </div>
          <div class="product-tabs__review-content">
            {{ review[1].content }}
          </div>
        </div>
      {%- endfor -%}
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const tabs = document.querySelectorAll('.product-tabs__tab');
    const contents = document.querySelectorAll('.product-tabs__content');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // Remove active class from all tabs and contents
        tabs.forEach(t => t.classList.remove('active'));
        contents.forEach(c => c.classList.remove('active'));

        // Add active class to clicked tab and corresponding content
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });
  });
</script>

{% schema %}
{
  "name": "Product Details Tabs",
  "settings": [],
  "presets": [
    {
      "name": "Product Details Tabs"
    }
  ]
}
{% endschema %} 