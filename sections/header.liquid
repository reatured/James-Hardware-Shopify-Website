{%- liquid
  assign has_app_block = false
  for block in section.blocks
    if block.type == '@app'
      assign has_app_block = true
      break
    endif
  endfor

  assign social_links = false
  if settings.social_twitter_link != blank or settings.social_facebook_link != blank or settings.social_pinterest_link != blank or settings.social_instagram_link != blank or settings.social_tiktok_link != blank or settings.social_tumblr_link != blank or settings.social_snapchat_link != blank or settings.social_youtube_link != blank or settings.social_vimeo_link != blank
    assign social_links = true
  endif

  assign localization_forms = false
  if localization.available_countries.size > 1 or localization.available_languages.size > 1
    assign localization_forms = true
  endif
-%}

<{% if section.settings.sticky_header_type != 'none' %}sticky-header data-sticky-type="{{ section.settings.sticky_header_type }}"{% else %}div{% endif %} class="header-wrapper gradient{% if section.settings.show_line_separator %} header-wrapper--border-bottom{% endif %}">
  <div class="header-top color-{{ section.settings.color_scheme }}">
    <header class="header header--{{ section.settings.logo_position }} header--mobile-{{ section.settings.mobile_logo_position }} page-width{% if section.settings.menu_type_desktop == 'drawer' %} drawer-menu{% endif %}{% if section.settings.menu != blank %} header--has-menu{% endif %}{% if has_app_block %} header--has-app{% endif %}{% if social_links %} header--has-social{% endif %}{% if shop.customer_accounts_enabled %} header--has-account{% endif %}{% if localization_forms %} header--has-localizations{% endif %}">
      {%- render 'header-icons' -%}
      {%- render 'header-logo' -%}
    </header>
  </div>

  <div class="header-bottom color-{{ section.settings.menu_color_scheme }}">
    <div class="page-width">
      {%- if section.settings.menu != blank -%}
        {%- if section.settings.menu_type_desktop == 'dropdown' -%}
          {%- render 'header-dropdown-menu' -%}
        {%- elsif section.settings.menu_type_desktop != 'drawer' -%}
          {%- render 'header-mega-menu' -%}
        {%- endif -%}
      {%- endif -%}
    </div>
  </div>
</{% if section.settings.sticky_header_type != 'none' %}sticky-header{% else %}div{% endif %}>

{%- render 'cart-notification' -%}

{%- if section.settings.menu_type_desktop == 'drawer' -%}
  {%- render 'drawer-menu' -%}
{%- endif -%}

{%- style -%}
  /* Header Layout */
  .header {
    padding: {{ section.settings.padding_top | times: 0.3 | round: 0 }}px 3rem {{ section.settings.padding_bottom | times: 0.3 | round: 0 }}px 3rem;
    max-width: {{ settings.page_width }}px;
    margin: 0 auto;
  }

  /* Header Top */
  .header-top {
    width: 100%;
    display: flex;
    align-items: center;
  }

  /* Header Bottom */
  .header-bottom {
    width: 100%;
    border-top: 1px solid rgba(var(--color-foreground), 0.08);
    background-color: rgb(var(--color-background));
  }

  .header-bottom .list-menu__item--link {
    color: rgb(var(--color-foreground));
  }

  /* Responsive Styles */
  @media screen and (min-width: 990px) {
    .header {
      padding-top: {{ section.settings.padding_top | times: 0.5 | round: 0 }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.5 | round: 0 }}px;
    }
  }

  @media screen and (max-width: 989px) {
    .header-bottom {
      display: none;
    }
  }

  /* Sticky Header */
  .header-wrapper--border-bottom {
    border-bottom: 1px solid rgba(var(--color-foreground), 0.08);
  }
{%- endstyle -%}

{% schema %}
{
  "name": "t:sections.header.name",
  "class": "section-header",
  "settings": [
    {
      "type": "select",
      "id": "logo_position",
      "options": [
        {
          "value": "top-left",
          "label": "t:sections.header.settings.logo_position.options__1.label"
        },
        {
          "value": "top-center",
          "label": "t:sections.header.settings.logo_position.options__2.label"
        },
        {
          "value": "middle-left",
          "label": "t:sections.header.settings.logo_position.options__3.label"
        },
        {
          "value": "middle-center",
          "label": "t:sections.header.settings.logo_position.options__4.label"
        }
      ],
      "default": "middle-left",
      "label": "t:sections.header.settings.logo_position.label"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.header.settings.color_scheme.label",
      "default": "background-1"
    },
    {
      "type": "color_scheme",
      "id": "menu_color_scheme",
      "label": "t:sections.header.settings.menu_color_scheme.label",
      "default": "background-2"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "t:sections.header.settings.padding_top.label",
      "default": 20
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "t:sections.header.settings.padding_bottom.label",
      "default": 20
    }
  ]
}
{% endschema %}
